<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Type Conversion Macros</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.68.1">
<link rel="start" href="index.html" title="GLib Reference Manual">
<link rel="up" href="glib-fundamentals.html" title="GLib Fundamentals">
<link rel="prev" href="glib-Standard-Macros.html" title="Standard Macros">
<link rel="next" href="glib-Byte-Order-Macros.html" title="Byte Order Macros">
<meta name="generator" content="GTK-Doc V1.7 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="chapter" href="glib.html" title="GLib Overview">
<link rel="chapter" href="glib-fundamentals.html" title="GLib Fundamentals">
<link rel="chapter" href="glib-core.html" title="GLib Core Application Support">
<link rel="chapter" href="glib-utilities.html" title="GLib Utilities">
<link rel="chapter" href="glib-data-types.html" title="GLib Data Types">
<link rel="chapter" href="tools.html" title="GLib Tools">
<link rel="index" href="ix01.html" title="Index">
<link rel="index" href="ix02.html" title="Index of deprecated symbols">
<link rel="index" href="ix03.html" title="Index of new symbols in 2.2">
<link rel="index" href="ix04.html" title="Index of new symbols in 2.4">
<link rel="index" href="ix05.html" title="Index of new symbols in 2.6">
<link rel="index" href="ix06.html" title="Index of new symbols in 2.8">
<link rel="index" href="ix07.html" title="Index of new symbols in 2.10">
<link rel="index" href="ix08.html" title="Index of new symbols in 2.12">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="glib-Standard-Macros.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="glib-fundamentals.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">Справочное описание GLib</th>
<td><a accesskey="n" href="glib-Byte-Order-Macros.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts"><nobr><a href="#id2537778" class="shortcut">Начало</a>
                  &#160;|&#160;
                  <a href="#id2537844" class="shortcut">Описание</a></nobr></td></tr>
</table>
<div class="refentry" lang="en">
<a name="glib-Type-Conversion-Macros"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2>
<a name="id2537778"></a><span class="refentrytitle">Макросы преобразования типов</span>
</h2>
<p>Type Conversion Macros &#8212; 
Переносимый способ хранения целочисленных в указателях переменных.</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Краткое описание</h2>
<pre class="synopsis">

#include &lt;glib.h&gt;


#define     <a href="glib-Type-Conversion-Macros.html#GINT-TO-POINTER:CAPS">GINT_TO_POINTER</a>                 (i)
#define     <a href="glib-Type-Conversion-Macros.html#GPOINTER-TO-INT:CAPS">GPOINTER_TO_INT</a>                 (p)

#define     <a href="glib-Type-Conversion-Macros.html#GUINT-TO-POINTER:CAPS">GUINT_TO_POINTER</a>                (u)
#define     <a href="glib-Type-Conversion-Macros.html#GPOINTER-TO-UINT:CAPS">GPOINTER_TO_UINT</a>                (p)
#define     <a href="glib-Type-Conversion-Macros.html#GSIZE-TO-POINTER:CAPS">GSIZE_TO_POINTER</a>                (s)
#define     <a href="glib-Type-Conversion-Macros.html#GPOINTER-TO-SIZE:CAPS">GPOINTER_TO_SIZE</a>                (p)
</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2537844"></a><h2>Описание</h2>
<p>
Часто GLib, GTK+ и другие библиотеки позволяют вам помещать "пользовательские данные" 
в callback-функции, в форме void указателей. Время от времени вам необходимо помещать
целочисленные вместо указателей. Вы можете разместить целочисленное примерно так:
</p>
<div class="informalexample"><pre class="programlisting">
 int *ip = g_new (int, 1);
 *ip = 42;
</pre></div>
<p>
Но это не удобно и требует в последствии освобождать память.
</p>
<p>
Указатели имеют размер всегда 32 бита (На всех платформах.GLib
подразумевает поддержку). Поэтому вы можете хранить небольшие 32-битные целочисленные значения
в указателях. Вы бы могли попробовать следующий способ, но он не верен:
</p>
<div class="informalexample"><pre class="programlisting">
 gpointer p;
 int i;
 p = (void*) 42;
 i = (int) p;
</pre></div>
<p>
Ещё раз напоминаем пример выше <span class="emphasis"><em>не</em></span> правильный, не копируйте его. 
Проблема в том, что на некоторых системах вы должны сделать так:
</p>
<div class="informalexample"><pre class="programlisting">
 gpointer p;
 int i;
 p = (void*) (long) 42;
 i = (int) (long) p;
</pre></div>
<p>
Поэтому <a href="glib-Type-Conversion-Macros.html#GPOINTER-TO-INT:CAPS"><code class="function">GPOINTER_TO_INT()</code></a>, <a href="glib-Type-Conversion-Macros.html#GINT-TO-POINTER:CAPS"><code class="function">GINT_TO_POINTER()</code></a>, и т.д. сделают эти вещи правильно на текущей платформе.
</p>
<p>
</p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Внимание</h3>
<p>
ВЫ НЕ МОЖЕТЕ ХРАНИТЬ УКАЗАТЕЛИ В ЦЕЛЫХ ЧИСЛАХ. ЭТО НЕ ПЕРЕНОСИМО НИ В КАКОЙ ФОРМЕ. 
Эти макросы позволяют хранить <span class="emphasis"><em>ТОЛЬКО</em></span> 
целочисленные в указателях, и хранят только 32 битные целочисленные; 
значения целочисленных за пределами диапазона 32-бит будут искажены.
</p>
</div>
<p>
</p>
</div>
<div class="refsect1" lang="en">
<a name="id2537940"></a><h2>Детали</h2>
<div class="refsect2" lang="en">
<a name="id2537951"></a><h3>
<a name="GINT-TO-POINTER:CAPS"></a>GINT_TO_POINTER()</h3>
<a class="indexterm" name="id2537964"></a><pre class="programlisting">#define GINT_TO_POINTER(i)	((gpointer)  (i))
</pre>
<p>
Помещает целочисленное в тип указателя.
</p>
<p>
Помните, ВЫ НЕ МОЖЕТЕ СОХРАНЯТЬ УКАЗАТЕЛИ В ЦЕЛОЧИСЛЕННЫХ. 
ЭТО НЕ ПЕРЕНОСИМЫЙ СПОСОБ ФОРМИРОВАНИЯ ИЛИ ФОРМЫ. 
Эти макросы позволяют хранить <span class="emphasis"><em>ТОЛЬКО</em></span> 
целочисленные в указателях, и хранят только 32 битные целочисленные; 
значения целочисленных за пределами диапазона 32-бит будут искажены.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>i</code></em>&#160;:</span></td>
<td>целочисленное для помещения в указатель.

</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2538010"></a><h3>
<a name="GPOINTER-TO-INT:CAPS"></a>GPOINTER_TO_INT()</h3>
<a class="indexterm" name="id2538023"></a><pre class="programlisting">#define GPOINTER_TO_INT(p)	((gint)   (p))
</pre>
<p>
Извлекает целочисленное из указателя. Это целочисленное должно быть предварительно помещено 
в указатель с помощью <a href="glib-Type-Conversion-Macros.html#GINT-TO-POINTER:CAPS"><code class="function">GINT_TO_POINTER()</code></a>.
</p>
<p>
Помните, ВЫ НЕ МОЖЕТЕ СОХРАНЯТЬ УКАЗАТЕЛИ В ЦЕЛОЧИСЛЕННЫХ. 
ЭТО НЕ ПЕРЕНОСИМЫЙ СПОСОБ ФОРМИРОВАНИЯ ИЛИ ФОРМЫ. 
Эти макросы позволяют хранить <span class="emphasis"><em>ТОЛЬКО</em></span> 
целочисленные в указателях, и хранят только 32 битные целочисленные; 
значения целочисленных за пределами диапазона 32-бит будут искажены.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>p</code></em>&#160;:</span></td>
<td>указатель содержащий целочисленное.

</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2538080"></a><h3>
<a name="GUINT-TO-POINTER:CAPS"></a>GUINT_TO_POINTER()</h3>
<a class="indexterm" name="id2538093"></a><pre class="programlisting">#define GUINT_TO_POINTER(u)	((gpointer)  (u))
</pre>
<p>
Помещает целочисленное без знака в тип указателя.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>u</code></em>&#160;:</span></td>
<td>целочисленное без знака для помещения в указатель.

</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2538129"></a><h3>
<a name="GPOINTER-TO-UINT:CAPS"></a>GPOINTER_TO_UINT()</h3>
<a class="indexterm" name="id2538141"></a><pre class="programlisting">#define GPOINTER_TO_UINT(p)	((guint)  (p))
</pre>
<p>
Извлекает целочисленное без знака из указателя. Целочисленное должно быть предварительно 
помещено в указатель с помощью <a href="glib-Type-Conversion-Macros.html#GUINT-TO-POINTER:CAPS"><code class="function">GUINT_TO_POINTER()</code></a>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>p</code></em>&#160;:</span></td>
<td>указатель содержащий целочисленное без знака.

</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2538188"></a><h3>
<a name="GSIZE-TO-POINTER:CAPS"></a>GSIZE_TO_POINTER()</h3>
<a class="indexterm" name="id2538201"></a><pre class="programlisting">#define GSIZE_TO_POINTER(s)	((gpointer) (gsize) (s))
</pre>
<p>
Помещает <a href="glib-Basic-Types.html#gsize"><span class="type">gsize</span></a> в тип указателя.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>s</code></em>&#160;:</span></td>
<td>
<a href="glib-Basic-Types.html#gsize"><span class="type">gsize</span></a> для помещения в указатель.

</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2538249"></a><h3>
<a name="GPOINTER-TO-SIZE:CAPS"></a>GPOINTER_TO_SIZE()</h3>
<a class="indexterm" name="id2538263"></a><pre class="programlisting">#define GPOINTER_TO_SIZE(p)	((gsize) (p))
</pre>
<p>
Извлекает <a href="glib-Basic-Types.html#gsize"><span class="type">gsize</span></a> из указателя. Предварительно <a href="glib-Basic-Types.html#gsize"><span class="type">gsize</span></a> должен быть помещён в указатель с помощью <a href="glib-Type-Conversion-Macros.html#GSIZE-TO-POINTER:CAPS"><code class="function">GSIZE_TO_POINTER()</code></a>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>p</code></em>&#160;:</span></td>
<td>указатель для извлечения <a href="glib-Basic-Types.html#gsize"><span class="type">gsize</span></a>.

</td>
</tr></tbody>
</table></div>
<br>
</div>
</div>
</div>
</body>
</html>
