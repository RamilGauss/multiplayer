<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Running GLib Applications</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.68.1">
<link rel="start" href="index.html" title="GLib Reference Manual">
<link rel="up" href="glib.html" title="GLib Overview">
<link rel="prev" href="glib-compiling.html" title="Compiling GLib Applications">
<link rel="next" href="glib-changes.html" title="Changes to GLib">
<meta name="generator" content="GTK-Doc V1.7 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="chapter" href="glib.html" title="GLib Overview">
<link rel="chapter" href="glib-fundamentals.html" title="GLib Fundamentals">
<link rel="chapter" href="glib-core.html" title="GLib Core Application Support">
<link rel="chapter" href="glib-utilities.html" title="GLib Utilities">
<link rel="chapter" href="glib-data-types.html" title="GLib Data Types">
<link rel="chapter" href="tools.html" title="GLib Tools">
<link rel="index" href="ix01.html" title="Index">
<link rel="index" href="ix02.html" title="Index of deprecated symbols">
<link rel="index" href="ix03.html" title="Index of new symbols in 2.2">
<link rel="index" href="ix04.html" title="Index of new symbols in 2.4">
<link rel="index" href="ix05.html" title="Index of new symbols in 2.6">
<link rel="index" href="ix06.html" title="Index of new symbols in 2.8">
<link rel="index" href="ix07.html" title="Index of new symbols in 2.10">
<link rel="index" href="ix08.html" title="Index of new symbols in 2.12">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2"><tr valign="middle">
<td><a accesskey="p" href="glib-compiling.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="glib.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">Справочное описание GLib</th>
<td><a accesskey="n" href="glib-changes.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry" lang="en">
<a name="glib-running"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle">Выполнение GLib приложения</span></h2>
<p>Running GLib Applications &#8212; 
Как выполнять и отлаживать GLib приложение
</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1" lang="en">
<a name="id2525008"></a><h2>Выполнение и отладка GLib приложений</h2>
<div class="refsect2" lang="en">
<a name="id2525014"></a><h3>Переменные окружения</h3>
<p> 
GLib проверяет несколько переменных окружения в дополнение к стандартным
переменным таких как <code class="envar">LANG</code>, <code class="envar">PATH</code> или <code class="envar">HOME</code>. 
</p>
<p><a name="G_FILENAME_ENCODING"></a><b><code class="envar">G_FILENAME_ENCODING</code>.&#160;</b>
    Эта переменная окружения может определять разделённый запятыми список имён 
    наборов символов. GLib предполагает что имена файлов находятся в кодировке первого набора 
    символов в этом списке вместо UTF-8. Специальная лексема "@locale" может использоваться
    для определения набора символов текущей локали (locale).
  </p>
<p><a name="G_BROKEN_FILENAMES"></a><b><code class="envar">G_BROKEN_FILENAMES</code>.&#160;</b>
    Если эта переменная окружения установлена, GLib предполагает что имена файлов находятся в  
    кодировке локали (locale) вместо UTF-8. G_FILENAME_ENCODING имеет приоритет над 
    G_BROKEN_FILENAMES. 
  </p>
<p><a name="G_MESSAGES_PREFIXED"></a><b><code class="envar">G_MESSAGES_PREFIXED</code>.&#160;</b>
    Список регистрационного уровня для которого сообщения должны быть предустановленны 
    именем программы и PID приложения. По умолчанию с префиксом все кроме
    <code class="literal">G_LOG_LEVEL_MESSAGE</code> и 
    <code class="literal">G_LOG_LEVEL_INFO</code>. 
  </p>
<p><a name="G_DEBUG"></a><b><code class="envar">G_DEBUG</code>.&#160;</b>
    Если GLib сконфигурирована с <code class="option">--enable-debug=yes</code>,
    эта переменная может быть установлена в список отладочных опций, которые заставят GLib
    печатать различную отладочную информацию.
    </p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term">fatal_warnings</span></td>
<td><p>Заставит GLib прервать программу при первом вызове 
       <a href="glib-Message-Logging.html#g-warning">g_warning</a>() или
       <a href="glib-Message-Logging.html#g-critical">g_critical</a>(). 
       Особенность опции в том, что не требуется конфигурация GLib 
       с поддержкой отладки.</p></td>
</tr>
<tr>
<td><span class="term">fatal_criticals</span></td>
<td><p>Заставит GLib прервать программу при первом вызове
       <a href="glib-Message-Logging.html#g-critical">g_critical</a>(). 
       Особенность опции в том, что не требуется конфигурация GLib 
       с поддержкой отладки.</p></td>
</tr>
<tr>
<td><span class="term">gc-friendly</span></td>
<td><p>
       Вновь распределенная память которая непосредственно не инициализирована, 
       также как освобождаемая память будет сброшена в 0. Позволяет проверочным 
       программам памяти и подобным программам использующим алгоритмы подобные GC
       (сборщик мусора) произвести более точные результаты.
       Особенность опции в том, что не требуется конфигурация GLib 
       с поддержкой отладки.</p></td>
</tr>
<tr>
<td><span class="term">resident-modules</span></td>
<td><p>
       Все модули загруженные GModule будут сделаны постоянно находящимися в оперативной памяти. 
       Это может быть полезно при отслеживании утечек памяти в модулях которые загружаются позже; 
       но это может также скрыть ошибки когда к коду обращаются после обычной выгрузки модуля.
       Особенность опции в том, что не требуется конфигурация GLib 
       с поддержкой отладки.</p></td>
</tr>
<tr>
<td><span class="term">bind-now-modules</span></td>
<td><p>
       Все модули загруженные GModule свяжут свои идентификаторы во время загрузки, 
       даже когда код использует %G_MODULE_BIND_LAZY.
       Особенность опции в том, что не требуется конфигурация GLib 
       с поддержкой отладки.</p></td>
</tr>
</tbody>
</table></div>
<p>
  </p>
<p><a name="G_SLICE"></a><b><code class="envar">G_SLICE</code>.&#160;</b>
	  Эта переменная окружения позволяет переконфигурировать #GSlice
	  программу распределения памяти (memory allocator).
	  </p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term">always-malloc</span></td>
<td><p>
		  Это заставит все участки распределённые через g_slice_alloc() и
		  освобожденные с помощью g_slice_free1() фактически распределяться 
		  непосредственно через вызовы g_malloc() и g_free().
		  Позволяет проверочным программам памяти и подобным программам 
                  использующим алгоритмы подобные GC (сборщик мусора) произвести 
                  более точные результаты.
		  Может также связать с отладочной особенностью реализации системы
		  malloc такой как glibc's MALLOC_CHECK_=2 для отладки кода ошибочно 
                  распределенных участков.
		</p></td>
</tr></tbody>
</table></div>
<p>
	</p>
<p><a name="G_RANDOM_VERSION"></a><b><code class="envar">G_RANDOM_VERSION</code>.&#160;</b>
    Если эта переменная установлена в '2.0', будут использоваться 
    устаревшие алгоритмы генерирования псевдо-случайных чисел из
    GLib-2.0 вместо улучшенных новых. Используйте GLib-2.0
    алгоритмы только если вы генерировали последовательность чисел с помощью
    Glib-2.0 которую вам нужно воспроизвести в точности.  
  </p>
<p><a name="LIBCHARSET_ALIAS_DIR"></a><b><code class="envar">LIBCHARSET_ALIAS_DIR</code>.&#160;</b>
    Позволяет специфичное не стандартное расположение для 
    <code class="filename">charset.aliases</code> файла который используется 
    подпрограммами конвертации наборов символов. По умолчанию расположение определяет 
    <em class="replaceable"><code>libdir</code></em> во время компиляции.
  </p>
<p><a name="G_WIN32_PRETEND_WIN9X"></a><b><code class="envar">G_WIN32_PRETEND_WIN9X</code>.&#160;</b>
    Установка этой переменной в любое значение заставит g_win32_get_windows_version()
    возвращать версию кода для Windows 9x. Это главным образом для внутренней 
    отладки GTK+ и GLib, позволяет разработчикам проверить код для Windows 9x.
  </p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2525968"></a><h3>Ловушки и трассировка (Traps and traces)</h3>
<p>
<a class="indexterm" name="id2525976"></a>
<a class="indexterm" name="id2525982"></a>
<a class="indexterm" name="id2525989"></a>
Некоторые части кода содержат переменные "ловушки" которые могут быть установлены во время отладки 
если GLib сконфигурирована с <code class="option">--enable-debug=yes</code>. 
Такие "ловушки" приводят к непосредственной остановки кода для исследования 
текущего состояния программы и отслеживания (backtrace).
</p>
<p>
В настоящее время существуют следующие переменные "ловушки":
</p>
<pre class="programlisting">
static volatile gulong g_trap_free_size;
static volatile gulong g_trap_realloc_size;
static volatile gulong g_trap_malloc_size;
</pre>
<p>
Если установлен размер &gt; 0, <a href="glib-Memory-Allocation.html#g-free">g_free</a>(), 
<a href="glib-Memory-Allocation.html#g-realloc">g_realloc</a>() и 
<a href="glib-Memory-Allocation.html#g-malloc">g_malloc</a>() будут прерваны, если размер 
будет соответствовать размеру блока памяти. Это работает только с  
<code class="literal">g_mem_set_vtable (glib_mem_profiler_table)</code> во время старта, 
потому что профиль памяти требует соответствия в размерах блоков памяти.
</p>
<p>
Помните что многие современные отладчики поддерживают условные точки остановки, 
которые выполняют аналогичные функции. 
Например в gdb, вы можете сделать следующее
</p>
<pre class="programlisting">
break g_malloc
condition 1 n_bytes == 20
</pre>
<p>
для остановки только в g_malloc() вызове где размер распределяемого блока равен 20. 
</p>
<br>
</div>
</div>
</div>
</body>
</html>
